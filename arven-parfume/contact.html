<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hubungi Kami - ARVEN PARFUME</title>
    <link rel="stylesheet" href="stylecontact.css" />
    <link rel="stylesheet" href="auth_styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <header id="siteHeader">
      <div class="logo"><a href="index.html">ARVEN PARFUME</a></div>
      <div class="header-right-nav">
        <nav>
          <ul>
            <li><a href="index.html">BERANDA</a></li>
            <li><a href="about.html">TENTANG KAMI</a></li>
            <li><a href="koleksi.html">KOLEKSI</a></li>
            <li><a href="contact.html">KONTAK</a></li>

            <li>
              <a
                href="cart.html"
                class="icon"
                title="Keranjang"
                style="
                  position: relative;
                  text-decoration: none;
                  color: inherit;
                  display: flex;
                  align-items: center;
                "
              >
                <i class="fas fa-shopping-cart"></i>
                <span
                  id="cartBadge"
                  class="cart-badge"
                  style="
                    display: none;
                    position: absolute;
                    top: -8px;
                    right: -8px;
                    background: #a38b5d; /* Menggunakan Hex kode emas langsung jika var(--gold) tidak terbaca di css about */
                    color: #000;
                    border-radius: 50%;
                    font-size: 10px;
                    padding: 0;
                    width: 16px;
                    height: 16px;
                    justify-content: center;
                    align-items: center;
                    font-weight: bold;
                  "
                  >0</span
                >
              </a>
            </li>
          </ul>
        </nav>

        <div class="header-icons"></div>
      </div>
    </header>

    <main class="content-section">
      <h1>HUBUNGI KAMI</h1>
      <p>Silakan isi formulir di bawah ini untuk pertanyaan atau pemesanan.</p>

      <div
        id="formAlert"
        class="alert"
        role="status"
        style="display: none"
      ></div>

      <div class="contact-container">
        <form id="contactForm">
          <h2 class="form-title">Formulir Kontak</h2>

          <div class="form-group">
            <label for="name">Nama Lengkap</label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Masukkan nama lengkap Anda"
              required
            />
            <small class="field-error" id="err-name" style="display: none"
              >Nama tidak boleh kosong.</small
            >
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="nama@contoh.com"
              required
            />
            <small class="field-error" id="err-email" style="display: none"
              >Email tidak valid.</small
            >
          </div>

          <div class="form-group">
            <label for="subject">Subjek</label>
            <input
              type="text"
              id="subject"
              name="subject"
              placeholder="Judul pesan Anda"
              required
            />
            <small class="field-error" id="err-subject" style="display: none"
              >Subjek wajib diisi.</small
            >
          </div>

          <div class="form-group">
            <label for="message">Pesan</label>
            <textarea
              id="message"
              name="message"
              placeholder="Tulis pesan Anda..."
              rows="5"
              required
            ></textarea>
            <small class="field-error" id="err-message" style="display: none"
              >Pesan wajib diisi.</small
            >
          </div>

          <button type="submit" class="submit-btn ripple">KIRIM PESAN</button>
        </form>
      </div>
    </main>

    <!-- SCRIPT INLINE - LANGSUNG DI HTML -->
    <script>
      console.log("ğŸ”¥ SCRIPT LOADED!");
      console.log("Location:", window.location.href);

      // Validasi sederhana
      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email);
      }

      // Tunggu DOM ready
      window.addEventListener("DOMContentLoaded", function () {
        console.log("âœ… DOM READY!");

        const form = document.getElementById("contactForm");
        const alertBox = document.getElementById("formAlert");

        console.log("Form:", form);
        console.log("Alert:", alertBox);

        if (!form) {
          console.error("âŒ FORM TIDAK DITEMUKAN!");
          alert("ERROR: Form tidak ditemukan!");
          return;
        }

        console.log("âœ… Form ditemukan, memasang event listener...");

        form.addEventListener("submit", async function (e) {
          e.preventDefault();

          console.log("");
          console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
          console.log("ğŸš€ FORM SUBMIT!");
          console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

          // Ambil nilai
          const name = document.getElementById("name").value.trim();
          const email = document.getElementById("email").value.trim();
          const subject = document.getElementById("subject").value.trim();
          const message = document.getElementById("message").value.trim();

          console.log("Data:");
          console.log("  Name:", name);
          console.log("  Email:", email);
          console.log("  Subject:", subject);
          console.log("  Message:", message);

          // Validasi
          if (!name) {
            alert("Nama tidak boleh kosong!");
            console.log("âŒ Validasi gagal: Nama kosong");
            return;
          }

          if (!email || !isValidEmail(email)) {
            alert("Email tidak valid!");
            console.log("âŒ Validasi gagal: Email tidak valid");
            return;
          }

          if (!subject) {
            alert("Subjek tidak boleh kosong!");
            console.log("âŒ Validasi gagal: Subjek kosong");
            return;
          }

          if (!message) {
            alert("Pesan tidak boleh kosong!");
            console.log("âŒ Validasi gagal: Pesan kosong");
            return;
          }

          console.log("âœ… Validasi OK");

          // Tombol
          const btn = form.querySelector(".submit-btn");
          const originalText = btn.textContent;
          btn.textContent = "MENGIRIM...";
          btn.disabled = true;

          // Buat FormData
          const formData = new FormData(form);

          console.log("ğŸ“¦ Mengirim data ke submit_contact.php...");

          try {
            const response = await fetch("submit_contact.php", {
              method: "POST",
              body: formData,
            });

            console.log("ğŸ“¨ Response:", response.status, response.statusText);

            const text = await response.text();
            console.log("ğŸ“„ Response text:", text);

            const result = JSON.parse(text);
            console.log("âœ… JSON parsed:", result);

            if (result.success) {
              console.log("ğŸ‰ BERHASIL! ID:", result.data?.id);

              alertBox.textContent = result.message;
              alertBox.className = "alert success";
              alertBox.style.display = "block";
              alertBox.style.background = "#d4edda";
              alertBox.style.color = "#155724";
              alertBox.style.padding = "15px";
              alertBox.style.borderRadius = "5px";
              alertBox.style.marginBottom = "20px";

              form.reset();

              alert("BERHASIL! Data sudah masuk database. Cek phpMyAdmin!");
            } else {
              console.log("âŒ Error:", result.message);
              alert("ERROR: " + result.message);

              alertBox.textContent = result.message;
              alertBox.className = "alert error";
              alertBox.style.display = "block";
              alertBox.style.background = "#f8d7da";
              alertBox.style.color = "#721c24";
              alertBox.style.padding = "15px";
              alertBox.style.borderRadius = "5px";
              alertBox.style.marginBottom = "20px";
            }
          } catch (error) {
            console.error("âŒ FETCH ERROR:", error);
            alert("ERROR: " + error.message);

            alertBox.textContent = "Error: " + error.message;
            alertBox.className = "alert error";
            alertBox.style.display = "block";
            alertBox.style.background = "#f8d7da";
            alertBox.style.color = "#721c24";
            alertBox.style.padding = "15px";
            alertBox.style.borderRadius = "5px";
            alertBox.style.marginBottom = "20px";
          } finally {
            btn.textContent = originalText;
            btn.disabled = false;
          }
        });

        console.log("âœ… Event listener terpasang!");
      });
    </script>
    <script src="auth.js"></script>
    <script src="animation.js"></script>
    <script src="navbar.js"></script>
  </body>
</html>
